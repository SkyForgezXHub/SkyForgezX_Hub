--[[
    SkyForgezX Hub v16.0 - INFINITY PRIME Edition
    Producer: SkyForgezX
    Features: Infinity Robux (Visual), God Mode, Invisible Fling
    Executors: Solara, Delta, Xeno, Krln, Fluxus, Hydrogen, Codex, Arceus X
]]

-- === SERVICES ===
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local Lighting = game:GetService("Lighting")
local CoreGui = game:GetService("CoreGui")
local VirtualUser = game:GetService("VirtualUser")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local StarterGui = game:GetService("StarterGui")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local LocalPlayer = Players.LocalPlayer
local Camera = Workspace.CurrentCamera
local Mouse = LocalPlayer:GetMouse()

-- === CONFIG ===
local Config = {
    FlySpeed = 50,
    WalkSpeed = 16,
    JumpPower = 50,
    RainbowUI = true,
    RobuxAmount = "∞" -- Infinity Symbol
}

local State = {
    Fly = false,
    Noclip = false,
    Aimbot = false,
    ESP = false,
    KillAura = false,
    GodMode = false,
    InfRobux = false,
    Fling = false
}

-- === UI LIBRARY ===
local Library = {}
function Library:SafeGui()
    local s, p = pcall(function() return getgenv and CoreGui or LocalPlayer.PlayerGui end)
    return s and p or LocalPlayer.PlayerGui
end

if Library:SafeGui():FindFirstChild("SkyInfinityPrime") then
    Library:SafeGui().SkyInfinityPrime:Destroy()
end

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "SkyInfinityPrime"
ScreenGui.Parent = Library:SafeGui()
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.IgnoreGuiInset = true

-- BLUR
local Blur = Instance.new("BlurEffect")
Blur.Size = 0
Blur.Parent = Lighting

-- THEME
local Theme = {
    Main = Color3.fromRGB(170, 0, 255),
    Dark = Color3.fromRGB(8, 8, 10),
    Text = Color3.fromRGB(255, 255, 255),
    Sidebar = Color3.fromRGB(12, 12, 15)
}

-- NOTIFICATIONS
local NotifHolder = Instance.new("Frame")
NotifHolder.Size = UDim2.new(0, 300, 1, 0)
NotifHolder.Position = UDim2.new(1, -310, 0, 50)
NotifHolder.BackgroundTransparency = 1
NotifHolder.Parent = ScreenGui
local NotifLayout = Instance.new("UIListLayout")
NotifLayout.Padding = UDim.new(0, 10)
NotifLayout.VerticalAlignment = Enum.VerticalAlignment.Bottom
NotifLayout.Parent = NotifHolder

function Library:Notify(title, text)
    local Frame = Instance.new("Frame")
    Frame.Size = UDim2.new(1, 0, 0, 0)
    Frame.BackgroundColor3 = Theme.Dark
    Frame.BorderSizePixel = 0
    Frame.Parent = NotifHolder
    Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 8)
    
    local Stroke = Instance.new("UIStroke")
    Stroke.Color = Theme.Main
    Stroke.Thickness = 1.5
    Stroke.Parent = Frame
    
    -- Sync RGB
    task.spawn(function()
        while Frame.Parent do
            Stroke.Color = Theme.Main
            task.wait(0.1)
        end
    end)
    
    local T = Instance.new("TextLabel")
    T.Text = title
    T.Size = UDim2.new(1, -20, 0, 20)
    T.Position = UDim2.new(0, 10, 0, 5)
    T.BackgroundTransparency = 1
    T.TextColor3 = Theme.Main
    T.Font = Enum.Font.GothamBold
    T.TextSize = 14
    T.TextXAlignment = Enum.TextXAlignment.Left
    T.Parent = Frame
    
    local M = Instance.new("TextLabel")
    M.Text = text
    M.Size = UDim2.new(1, -20, 0, 20)
    M.Position = UDim2.new(0, 10, 0, 25)
    M.BackgroundTransparency = 1
    M.TextColor3 = Theme.Text
    M.Font = Enum.Font.Gotham
    M.TextSize = 12
    M.TextXAlignment = Enum.TextXAlignment.Left
    M.Parent = Frame
    
    TweenService:Create(Frame, TweenInfo.new(0.5, Enum.EasingStyle.Back), {Size = UDim2.new(1, 0, 0, 60)}):Play()
    task.delay(3, function()
        TweenService:Create(Frame, TweenInfo.new(0.5), {Size = UDim2.new(1,0,0,0)}):Play()
        task.wait(0.5)
        Frame:Destroy()
    end)
end

-- MAIN GUI
local Main = Instance.new("Frame")
Main.Size = UDim2.new(0, 850, 0, 550)
Main.Position = UDim2.new(0.5, -425, 0.5, -275)
Main.BackgroundColor3 = Theme.Dark
Main.BorderSizePixel = 0
Main.ClipsDescendants = true
Main.Visible = false
Main.Parent = ScreenGui
Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 12)

local MainStroke = Instance.new("UIStroke")
MainStroke.Thickness = 2
MainStroke.Parent = Main

local Glow = Instance.new("ImageLabel")
Glow.Position = UDim2.new(0, -50, 0, -50)
Glow.Size = UDim2.new(1, 100, 1, 100)
Glow.BackgroundTransparency = 1
Glow.Image = "rbxassetid://5028857472"
Glow.ZIndex = -1
Glow.Parent = Main

-- INFINITY RGB LOOP
task.spawn(function()
    while true do
        if Config.RainbowUI then
            local hue = tick() % 5 / 5
            local color = Color3.fromHSV(hue, 1, 1)
            Theme.Main = color
            MainStroke.Color = color
            Glow.ImageColor3 = color
        end
        task.wait(0.05)
    end
end)

-- SIDEBAR
local Sidebar = Instance.new("Frame")
Sidebar.Size = UDim2.new(0, 240, 1, 0)
Sidebar.BackgroundColor3 = Theme.Sidebar
Sidebar.BorderSizePixel = 0
Sidebar.Parent = Main
Instance.new("UICorner", Sidebar).CornerRadius = UDim.new(0, 12)

local Logo = Instance.new("ImageLabel")
Logo.Size = UDim2.new(0, 200, 0, 100)
Logo.Position = UDim2.new(0.5, -100, 0, 10)
Logo.BackgroundTransparency = 1
Logo.Image = "https://mutluresim.com/images/2026/02/07/XOKS1q.png"
Logo.ScaleType = Enum.ScaleType.Fit
Logo.Parent = Sidebar

local TabHolder = Instance.new("ScrollingFrame")
TabHolder.Size = UDim2.new(1, 0, 1, -200) -- Space for Profile
TabHolder.Position = UDim2.new(0, 0, 0, 110)
TabHolder.BackgroundTransparency = 1
TabHolder.ScrollBarThickness = 0
TabHolder.Parent = Sidebar
local TabList = Instance.new("UIListLayout")
TabList.HorizontalAlignment = Enum.HorizontalAlignment.Center
TabList.Padding = UDim.new(0, 8)
TabList.Parent = TabHolder

-- === PROFILE UI (INFINITY EDITION) ===
local ProfileFrame = Instance.new("Frame")
ProfileFrame.Size = UDim2.new(0.9, 0, 0, 80)
ProfileFrame.Position = UDim2.new(0.05, 0, 1, -90)
ProfileFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
ProfileFrame.Parent = Sidebar
Instance.new("UICorner", ProfileFrame).CornerRadius = UDim.new(0, 10)
local PStroke = Instance.new("UIStroke")
PStroke.Thickness = 1.5
PStroke.Parent = ProfileFrame
-- Sync
task.spawn(function() while ProfileFrame.Parent do PStroke.Color = Theme.Main; task.wait(0.1) end end)

local UserImage = Instance.new("ImageLabel")
UserImage.Size = UDim2.new(0, 50, 0, 50)
UserImage.Position = UDim2.new(0, 10, 0, 15)
UserImage.BackgroundColor3 = Theme.Dark
UserImage.Image = Players:GetUserThumbnailAsync(LocalPlayer.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size420x420)
UserImage.Parent = ProfileFrame
Instance.new("UICorner", UserImage).CornerRadius = UDim.new(1, 0)

local DisplayName = Instance.new("TextLabel")
DisplayName.Text = LocalPlayer.DisplayName
DisplayName.Size = UDim2.new(1, -70, 0, 20)
DisplayName.Position = UDim2.new(0, 70, 0, 15)
DisplayName.BackgroundTransparency = 1
DisplayName.TextColor3 = Color3.new(1,1,1)
DisplayName.Font = Enum.Font.GothamBold
DisplayName.TextSize = 13
DisplayName.TextXAlignment = Enum.TextXAlignment.Left
DisplayName.Parent = ProfileFrame

local RobuxLabel = Instance.new("TextLabel")
RobuxLabel.Name = "RobuxDisplay"
RobuxLabel.Text = "R$: " .. Config.RobuxAmount
RobuxLabel.Size = UDim2.new(1, -70, 0, 20)
RobuxLabel.Position = UDim2.new(0, 70, 0, 35)
RobuxLabel.BackgroundTransparency = 1
RobuxLabel.TextColor3 = Color3.fromRGB(0, 255, 100) -- Green for Money
RobuxLabel.Font = Enum.Font.GothamBold
RobuxLabel.TextSize = 13
RobuxLabel.TextXAlignment = Enum.TextXAlignment.Left
RobuxLabel.Parent = ProfileFrame

-- CONTENT AREA
local Content = Instance.new("Frame")
Content.Size = UDim2.new(1, -250, 1, -20)
Content.Position = UDim2.new(0, 250, 0, 10)
Content.BackgroundTransparency = 1
Content.Parent = Main
local Pages = {}

-- DRAG
local dragging, dragInput, dragStart, startPos
local function update(input)
    local delta = input.Position - dragStart
    Main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end
Sidebar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true; dragStart = input.Position; startPos = Main.Position
        input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragging = false end end)
    end
end)
Sidebar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then dragInput = input end
end)
UserInputService.InputChanged:Connect(function(input) if input == dragInput and dragging then update(input) end end)

-- MOBILE BUTTON
local MobBtn = Instance.new("ImageButton")
MobBtn.Size = UDim2.new(0, 65, 0, 65)
MobBtn.Position = UDim2.new(0, 30, 0.4, 0)
MobBtn.BackgroundColor3 = Theme.Dark
MobBtn.Image = "https://mutluresim.com/images/2026/02/07/XOKS1q.png"
MobBtn.Parent = ScreenGui
Instance.new("UICorner", MobBtn).CornerRadius = UDim.new(1,0)
local MStroke = Instance.new("UIStroke")
MStroke.Thickness = 2
MStroke.Parent = MobBtn
task.spawn(function() while MobBtn.Parent do MStroke.Color = Theme.Main; task.wait(0.1) end end)
local bDrag, bStart, bPos
MobBtn.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        bDrag = true; bStart = input.Position; bPos = MobBtn.Position
        input.Changed:Connect(function() 
            if input.UserInputState == Enum.UserInputState.End then 
                bDrag = false 
                if (input.Position - bStart).Magnitude < 5 then
                    Main.Visible = not Main.Visible
                    Blur.Size = Main.Visible and 20 or 0
                end
            end 
        end)
    end
end)
MobBtn.InputChanged:Connect(function(input)
    if bDrag and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local d = input.Position - bStart
        MobBtn.Position = UDim2.new(bPos.X.Scale, bPos.X.Offset + d.X, bPos.Y.Scale, bPos.Y.Offset + d.Y)
    end
end)

-- UI BUILDER
function Library:Tab(name)
    local Btn = Instance.new("TextButton")
    Btn.Text = name
    Btn.Size = UDim2.new(0.85, 0, 0, 40)
    Btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    Btn.TextColor3 = Color3.fromRGB(150, 150, 150)
    Btn.Font = Enum.Font.GothamBold
    Btn.TextSize = 13
    Btn.Parent = TabHolder
    Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 6)
    
    local Page = Instance.new("ScrollingFrame")
    Page.Size = UDim2.new(1, 0, 1, 0)
    Page.BackgroundTransparency = 1
    Page.ScrollBarThickness = 2
    Page.Visible = false
    Page.Parent = Content
    
    local UIList = Instance.new("UIListLayout")
    UIList.Padding = UDim.new(0, 6)
    UIList.Parent = Page
    
    Pages[name] = Page
    
    Btn.MouseButton1Click:Connect(function()
        for _,p in pairs(Pages) do p.Visible = false end
        Page.Visible = true
        for _,b in pairs(TabHolder:GetChildren()) do
            if b:IsA("TextButton") then
                TweenService:Create(b, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(30,30,30), TextColor3 = Color3.fromRGB(150,150,150)}):Play()
            end
        end
        TweenService:Create(Btn, TweenInfo.new(0.2), {BackgroundColor3 = Theme.Main, TextColor3 = Theme.Text}):Play()
    end)
    
    return {
        Toggle = function(text, default, callback)
            local TFrame = Instance.new("TextButton")
            TFrame.Text = ""
            TFrame.Size = UDim2.new(1, 0, 0, 40)
            TFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
            TFrame.Parent = Page
            Instance.new("UICorner", TFrame).CornerRadius = UDim.new(0, 6)
            
            local Lbl = Instance.new("TextLabel")
            Lbl.Text = text
            Lbl.Size = UDim2.new(0.7, 0, 1, 0)
            Lbl.Position = UDim2.new(0, 10, 0, 0)
            Lbl.BackgroundTransparency = 1
            Lbl.TextColor3 = Theme.Text
            Lbl.Font = Enum.Font.GothamSemibold
            Lbl.TextXAlignment = Enum.TextXAlignment.Left
            Lbl.TextSize = 14
            Lbl.Parent = TFrame
            
            local Switch = Instance.new("Frame")
            Switch.Size = UDim2.new(0, 40, 0, 20)
            Switch.Position = UDim2.new(1, -50, 0.5, -10)
            Switch.BackgroundColor3 = default and Theme.Main or Color3.fromRGB(50,50,50)
            Switch.Parent = TFrame
            Instance.new("UICorner", Switch).CornerRadius = UDim.new(1,0)
            local Dot = Instance.new("Frame")
            Dot.Size = UDim2.new(0,16,0,16)
            Dot.Position = default and UDim2.new(1,-18,0.5,-8) or UDim2.new(0,2,0.5,-8)
            Dot.BackgroundColor3 = Theme.Text
            Dot.Parent = Switch
            Instance.new("UICorner", Dot).CornerRadius = UDim.new(1,0)
            
            task.spawn(function() while Switch.Parent do if Switch.BackgroundColor3 ~= Color3.fromRGB(50,50,50) then Switch.BackgroundColor3 = Theme.Main end task.wait(0.2) end end)
            
            local on = default
            TFrame.MouseButton1Click:Connect(function()
                on = not on
                TweenService:Create(Switch, TweenInfo.new(0.2), {BackgroundColor3 = on and Theme.Main or Color3.fromRGB(50,50,50)}):Play()
                TweenService:Create(Dot, TweenInfo.new(0.2), {Position = on and UDim2.new(1,-18,0.5,-8) or UDim2.new(0,2,0.5,-8)}):Play()
                callback(on)
            end)
        end,
        Button = function(text, callback)
            local Btn = Instance.new("TextButton")
            Btn.Text = text
            Btn.Size = UDim2.new(1, 0, 0, 35)
            Btn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
            Btn.TextColor3 = Theme.Text
            Btn.Font = Enum.Font.GothamSemibold
            Btn.TextSize = 14
            Btn.Parent = Page
            Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 6)
            Btn.MouseButton1Click:Connect(function()
                TweenService:Create(Btn, TweenInfo.new(0.1), {BackgroundColor3 = Theme.Main}):Play()
                task.wait(0.1)
                TweenService:Create(Btn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(25, 25, 25)}):Play()
                callback()
            end)
        end,
        Slider = function(text, min, max, default, callback)
            local SFrame = Instance.new("Frame")
            SFrame.Size = UDim2.new(1, 0, 0, 50)
            SFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
            SFrame.Parent = Page
            Instance.new("UICorner", SFrame).CornerRadius = UDim.new(0, 6)
            local Lbl = Instance.new("TextLabel"); Lbl.Text = text; Lbl.Parent = SFrame; Lbl.TextColor3 = Theme.Text; Lbl.Size = UDim2.new(1,-20,0,20); Lbl.Position = UDim2.new(0,10,0,5); Lbl.BackgroundTransparency=1; Lbl.Font = Enum.Font.GothamSemibold
            local Val = Instance.new("TextLabel"); Val.Text = tostring(default); Val.Parent = SFrame; Val.TextColor3 = Theme.Main; Val.Size = UDim2.new(0,50,0,20); Val.Position = UDim2.new(1,-60,0,5); Val.BackgroundTransparency=1; Val.Font = Enum.Font.GothamBold
            local Bar = Instance.new("TextButton"); Bar.Text=""; Bar.Parent=SFrame; Bar.Size=UDim2.new(1,-20,0,6); Bar.Position=UDim2.new(0,10,0,35); Bar.BackgroundColor3=Color3.fromRGB(40,40,40); Instance.new("UICorner", Bar).CornerRadius=UDim.new(1,0)
            local Fill = Instance.new("Frame"); Fill.Size=UDim2.new((default-min)/(max-min),0,1,0); Fill.BackgroundColor3=Theme.Main; Fill.Parent=Bar; Instance.new("UICorner", Fill).CornerRadius=UDim.new(1,0)
            task.spawn(function() while Fill.Parent do Fill.BackgroundColor3 = Theme.Main; Val.TextColor3 = Theme.Main; task.wait(0.2) end end)
            local drag = false
            Bar.MouseButton1Down:Connect(function() drag=true end)
            UserInputService.InputEnded:Connect(function(i) if i.UserInputType==Enum.UserInputType.MouseButton1 then drag=false end end)
            UserInputService.InputChanged:Connect(function(i) if drag and i.UserInputType==Enum.UserInputType.MouseMovement then
                local p = math.clamp((UserInputService:GetMouseLocation().X-Bar.AbsolutePosition.X)/Bar.AbsoluteSize.X,0,1)
                Fill.Size = UDim2.new(p,0,1,0); local v=math.floor(min+((max-min)*p)); Val.Text=tostring(v); callback(v)
            end end)
        end
    }
end

-- === TABS ===
local InfinityTab = Library:Tab("INFINITY Robux")
local MainTab = Library:Tab("Main Features")
local CombatTab = Library:Tab("Combat")
local VisualsTab = Library:Tab("Visuals")
local TrollTab = Library:Tab("Troll & Fun")
local SystemTab = Library:Tab("System")

-- === 1. INFINITY ROBUX (VISUAL) ===
InfinityTab.Button("ACTIVATE INFINITY ROBUX", function()
    -- UI Update
    Config.RobuxAmount = "∞"
    if ProfileFrame and ProfileFrame:FindFirstChild("RobuxDisplay") then
        ProfileFrame.RobuxDisplay.Text = "R$: ∞"
    end
    
    -- Visual Leaderstats (If Game Has Them)
    if LocalPlayer:FindFirstChild("leaderstats") then
        for _, v in pairs(LocalPlayer.leaderstats:GetChildren()) do
            if v.Name:lower():find("money") or v.Name:lower():find("cash") or v.Name:lower():find("robux") then
                if v:IsA("IntValue") or v:IsA("NumberValue") then v.Value = 999999999 end
                if v:IsA("StringValue") then v.Value = "∞" end
            end
        end
    end
    
    -- Fake Notification
    StarterGui:SetCore("SendNotification", {
        Title = "SYSTEM";
        Text = "+999,999,999 Robux Added to Account";
        Icon = "rbxassetid://13350795662"; -- Robux Icon
        Duration = 5;
    })
    Library:Notify("INFINITY", "Visual Robux Injection Complete!")
end)

InfinityTab.Button("Spoof Leaderboard (999M)", function()
    if LocalPlayer:FindFirstChild("leaderstats") then
        for _, v in pairs(LocalPlayer.leaderstats:GetChildren()) do
            if v:IsA("IntValue") then v.Value = 999999999 end
        end
        Library:Notify("Success", "Leaderboard Values Spoofed!")
    else
        Library:Notify("Error", "No leaderstats found in this game.")
    end
end)

-- === 2. MAIN ===
MainTab.Toggle("Superman Fly", false, function(state)
    local root = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    local hum = LocalPlayer.Character:FindFirstChild("Humanoid")
    if state and root then
        local bv = Instance.new("BodyVelocity", root); bv.Name="SkyFly"; bv.MaxForce=Vector3.new(math.huge,math.huge,math.huge)
        local bg = Instance.new("BodyGyro", root); bg.Name="SkyGyro"; bg.P=9e4; bg.MaxTorque=Vector3.new(9e9,9e9,9e9)
        hum.PlatformStand = true
        task.spawn(function()
            while root:FindFirstChild("SkyFly") do
                if hum.MoveDirection.Magnitude > 0 then for _,t in pairs(hum:GetPlayingAnimationTracks()) do t:Stop() end end
                bg.CFrame = Camera.CFrame
                local cf = Camera.CFrame
                local v = Vector3.new()
                if UserInputService:IsKeyDown(Enum.KeyCode.W) then v=v+cf.LookVector end
                if UserInputService:IsKeyDown(Enum.KeyCode.S) then v=v-cf.LookVector end
                if UserInputService:IsKeyDown(Enum.KeyCode.A) then v=v-cf.RightVector end
                if UserInputService:IsKeyDown(Enum.KeyCode.D) then v=v+cf.RightVector end
                bv.Velocity = v * Config.FlySpeed
                RunService.RenderStepped:Wait()
            end
        end)
    else
        if root:FindFirstChild("SkyFly") then root.SkyFly:Destroy() end
        if root:FindFirstChild("SkyGyro") then root.SkyGyro:Destroy() end
        hum.PlatformStand = false
    end
end)
MainTab.Slider("Fly Speed", 20, 300, 50, function(v) Config.FlySpeed = v end)
MainTab.Toggle("God Mode (Remove Humanoid)", false, function(state)
    if state and LocalPlayer.Character then
        if LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.Name = "1"
            local l = LocalPlayer.Character["1"]:Clone()
            l.Parent = LocalPlayer.Character
            l.Name = "Humanoid"
            LocalPlayer.Character["1"]:Destroy()
            Workspace.CurrentCamera.CameraSubject = LocalPlayer.Character
            Library:Notify("God Mode", "Character Glitched (Immortality)")
        end
    end
end)

-- === 3. COMBAT ===
CombatTab.Toggle("Kill Aura (Fast)", false, function(state)
    State.KillAura = state
    task.spawn(function()
        while State.KillAura do
            local t = LocalPlayer.Character:FindFirstChildOfClass("Tool")
            if t then
                t:Activate()
                for _,p in pairs(Players:GetPlayers()) do
                    if p~=LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                        if (p.Character.HumanoidRootPart.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude < 25 then
                            firetouchinterest(t.Handle, p.Character.HumanoidRootPart, 0)
                            firetouchinterest(t.Handle, p.Character.HumanoidRootPart, 1)
                        end
                    end
                end
            end
            task.wait(0.01) -- Super fast
        end
    end)
end)

-- === 4. VISUALS ===
VisualsTab.Toggle("ESP Box", false, function(state)
    State.ESP = state
    while State.ESP do
        for _,p in pairs(Players:GetPlayers()) do
            if p~=LocalPlayer and p.Character and not p.Character:FindFirstChild("SkyESP") then
                local h = Instance.new("Highlight", p.Character); h.Name="SkyESP"; h.FillColor=Theme.Main; h.OutlineColor=Color3.new(1,1,1)
            end
        end
        task.wait(1)
    end
    if not state then for _,v in pairs(Workspace:GetDescendants()) do if v.Name=="SkyESP" then v:Destroy() end end end
end)

-- === 5. TROLL ===
TrollTab.Toggle("Invisible Fling", false, function(state)
    State.Fling = state
    if state then
        -- Invisibility
        for _,v in pairs(LocalPlayer.Character:GetDescendants()) do if v:IsA("BasePart") then v.Transparency=1 end end
        -- Spin Fling
        local root = LocalPlayer.Character.HumanoidRootPart
        local v = Instance.new("BodyAngularVelocity", root)
        v.Name = "Spin"
        v.AngularVelocity = Vector3.new(0, 100000, 0)
        v.MaxTorque = Vector3.new(0, math.huge, 0)
    else
        -- Visible
        for _,v in pairs(LocalPlayer.Character:GetDescendants()) do if v:IsA("BasePart") then v.Transparency=0 end end
        if LocalPlayer.Character.HumanoidRootPart:FindFirstChild("Spin") then LocalPlayer.Character.HumanoidRootPart.Spin:Destroy() end
    end
end)

TrollTab.Button("Freeze All (Anchor)", function()
    for _,p in pairs(Players:GetPlayers()) do
        if p~=LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
            p.Character.HumanoidRootPart.Anchored = true
        end
    end
    Library:Notify("Troll", "Everyone Frozen (Local)")
end)

-- === INIT ===
Library:Notify("INFINITY PRIME", "v16.0 Loaded. Welcome Master " .. LocalPlayer.Name)
    ESP = false,
    Spin = false
}

-- === 3. SAFE UI LOAD ===
local Library = {}
function Library:SafeGui()
    local s, p = pcall(function() return getgenv and CoreGui or LocalPlayer.PlayerGui end)
    return s and p or LocalPlayer.PlayerGui
end

if Library:SafeGui():FindFirstChild("SkyDivine") then
    Library:SafeGui().SkyDivine:Destroy()
end

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "SkyDivine"
ScreenGui.Parent = Library:SafeGui()
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.IgnoreGuiInset = true

-- BLUR
local Blur = Instance.new("BlurEffect")
Blur.Size = 0
Blur.Parent = Lighting

-- NOTIFICATIONS
local NotifContainer = Instance.new("Frame")
NotifContainer.Size = UDim2.new(0, 300, 1, 0)
NotifContainer.Position = UDim2.new(1, -320, 0, 50)
NotifContainer.BackgroundTransparency = 1
NotifContainer.Parent = ScreenGui
local NotifList = Instance.new("UIListLayout")
NotifList.Padding = UDim.new(0, 10)
NotifList.VerticalAlignment = Enum.VerticalAlignment.Bottom
NotifList.Parent = NotifContainer

function Library:Notify(title, text)
    local Frame = Instance.new("Frame")
    Frame.Size = UDim2.new(1, 0, 0, 0) -- Anim start
    Frame.BackgroundColor3 = Config.Dark
    Frame.Parent = NotifContainer
    Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 8)
    
    local Stroke = Instance.new("UIStroke")
    Stroke.Color = Config.Color
    Stroke.Thickness = 1
    Stroke.Parent = Frame
    
    local Icon = Instance.new("ImageLabel")
    Icon.Size = UDim2.new(0, 30, 0, 30)
    Icon.Position = UDim2.new(0, 10, 0.5, -15)
    Icon.BackgroundTransparency = 1
    Icon.Image = Config.Logo
    Icon.Parent = Frame
    
    local T = Instance.new("TextLabel")
    T.Text = title
    T.Size = UDim2.new(1, -50, 0, 20)
    T.Position = UDim2.new(0, 50, 0, 5)
    T.BackgroundTransparency = 1
    T.TextColor3 = Config.Color
    T.Font = Config.Font
    T.TextSize = 14
    T.TextXAlignment = Enum.TextXAlignment.Left
    T.Parent = Frame
    
    local M = Instance.new("TextLabel")
    M.Text = text
    M.Size = UDim2.new(1, -50, 0, 20)
    M.Position = UDim2.new(0, 50, 0, 25)
    M.BackgroundTransparency = 1
    M.TextColor3 = Color3.fromRGB(200,200,200)
    M.Font = Enum.Font.Gotham
    M.TextSize = 12
    M.TextXAlignment = Enum.TextXAlignment.Left
    M.Parent = Frame
    
    TweenService:Create(Frame, TweenInfo.new(0.5, Enum.EasingStyle.Back), {Size = UDim2.new(1, 0, 0, 60)}):Play()
    task.delay(4, function()
        TweenService:Create(Frame, TweenInfo.new(0.5), {Size = UDim2.new(1,0,0,0)}):Play()
        task.wait(0.5)
        Frame:Destroy()
    end)
end

-- MAIN GUI
local Main = Instance.new("Frame")
Main.Size = UDim2.new(0, 650, 0, 400)
Main.Position = UDim2.new(0.5, -325, 0.5, -200)
Main.BackgroundColor3 = Config.Dark
Main.BorderSizePixel = 0
Main.ClipsDescendants = true
Main.Parent = ScreenGui
Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 10)

-- GLOW
local Shadow = Instance.new("ImageLabel")
Shadow.AnchorPoint = Vector2.new(0.5, 0.5)
Shadow.Position = UDim2.new(0.5, 0, 0.5, 0)
Shadow.Size = UDim2.new(1, 120, 1, 120)
Shadow.ZIndex = -1
Shadow.Image = "rbxassetid://6015897843"
Shadow.ImageColor3 = Color3.new(0,0,0)
Shadow.ImageTransparency = 0.4
Shadow.Parent = Main

-- SIDEBAR
local Sidebar = Instance.new("Frame")
Sidebar.Size = UDim2.new(0, 160, 1, 0)
Sidebar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Sidebar.BorderSizePixel = 0
Sidebar.Parent = Main
Instance.new("UICorner", Sidebar).CornerRadius = UDim.new(0, 10)

local LogoImg = Instance.new("ImageLabel")
LogoImg.Size = UDim2.new(0, 60, 0, 60)
LogoImg.Position = UDim2.new(0.5, -30, 0, 15)
LogoImg.BackgroundTransparency = 1
LogoImg.Image = Config.Logo
LogoImg.Parent = Sidebar

local TitleLbl = Instance.new("TextLabel")
TitleLbl.Text = Config.Name
TitleLbl.Size = UDim2.new(1,0,0,20)
TitleLbl.Position = UDim2.new(0,0,0,80)
TitleLbl.BackgroundTransparency = 1
TitleLbl.TextColor3 = Color3.new(1,1,1)
TitleLbl.Font = Config.Font
TitleLbl.TextSize = 16
TitleLbl.Parent = Sidebar

local TabContainer = Instance.new("ScrollingFrame")
TabContainer.Size = UDim2.new(1,0,1,-110)
TabContainer.Position = UDim2.new(0,0,0,110)
TabContainer.BackgroundTransparency = 1
TabContainer.ScrollBarThickness = 0
TabContainer.Parent = Sidebar
local TabLayout = Instance.new("UIListLayout")
TabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
TabLayout.Padding = UDim.new(0, 8)
TabLayout.Parent = TabContainer

-- PAGE CONTAINER
local PageContainer = Instance.new("Frame")
PageContainer.Size = UDim2.new(1, -170, 1, -20)
PageContainer.Position = UDim2.new(0, 170, 0, 10)
PageContainer.BackgroundTransparency = 1
PageContainer.Parent = Main

local Pages = {}

-- DRAGGING
local dragging, dragInput, dragStart, startPos
local function update(input)
    local delta = input.Position - dragStart
    Main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end
Sidebar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true; dragStart = input.Position; startPos = Main.Position
        input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragging = false end end)
    end
end)
Sidebar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then dragInput = input end
end)
UserInputService.InputChanged:Connect(function(input) if input == dragInput and dragging then update(input) end end)

-- MOBILE
local MobileToggle = Instance.new("ImageButton")
MobileToggle.Size = UDim2.new(0, 50, 0, 50)
MobileToggle.Position = UDim2.new(0, 20, 0.4, 0)
MobileToggle.BackgroundColor3 = Config.Color
MobileToggle.Image = Config.Logo
MobileToggle.Parent = ScreenGui
Instance.new("UICorner", MobileToggle).CornerRadius = UDim.new(0, 16)
MobileToggle.MouseButton1Click:Connect(function() 
    Main.Visible = not Main.Visible 
    Blur.Size = Main.Visible and 20 or 0
end)

-- COMPONENTS
function Library:Tab(name)
    local Btn = Instance.new("TextButton")
    Btn.Text = name
    Btn.Size = UDim2.new(0.85, 0, 0, 35)
    Btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    Btn.TextColor3 = Color3.fromRGB(150, 150, 150)
    Btn.Font = Config.Font
    Btn.TextSize = 13
    Btn.Parent = TabContainer
    Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 8)
    
    local Page = Instance.new("ScrollingFrame")
    Page.Size = UDim2.new(1, 0, 1, 0)
    Page.BackgroundTransparency = 1
    Page.ScrollBarThickness = 2
    Page.Visible = false
    Page.Parent = PageContainer
    local PList = Instance.new("UIListLayout")
    PList.Padding = UDim.new(0, 8)
    PList.SortOrder = Enum.SortOrder.LayoutOrder
    PList.Parent = Page
    
    Pages[name] = Page
    
    Btn.MouseButton1Click:Connect(function()
        for _, p in pairs(Pages) do p.Visible = false end
        Page.Visible = true
        for _, b in pairs(TabContainer:GetChildren()) do
            if b:IsA("TextButton") then
                TweenService:Create(b, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(30,30,30), TextColor3 = Color3.fromRGB(150,150,150)}):Play()
            end
        end
        TweenService:Create(Btn, TweenInfo.new(0.2), {BackgroundColor3 = Config.Color, TextColor3 = Color3.new(1,1,1)}):Play()
    end)
    
    return {
        Toggle = function(text, default, callback)
            local TFrame = Instance.new("TextButton")
            TFrame.Text = ""
            TFrame.Size = UDim2.new(1, 0, 0, 40)
            TFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
            TFrame.Parent = Page
            Instance.new("UICorner", TFrame).CornerRadius = UDim.new(0, 8)
            
            local Lbl = Instance.new("TextLabel")
            Lbl.Text = text
            Lbl.Size = UDim2.new(0.7, 0, 1, 0)
            Lbl.Position = UDim2.new(0, 15, 0, 0)
            Lbl.BackgroundTransparency = 1
            Lbl.TextColor3 = Color3.new(1,1,1)
            Lbl.Font = Enum.Font.GothamSemibold
            Lbl.TextXAlignment = Enum.TextXAlignment.Left
            Lbl.TextSize = 14
            Lbl.Parent = TFrame
            
            local Status = Instance.new("Frame")
            Status.Size = UDim2.new(0, 40, 0, 20)
            Status.Position = UDim2.new(1, -50, 0.5, -10)
            Status.BackgroundColor3 = default and Config.Color or Color3.fromRGB(50,50,50)
            Status.Parent = TFrame
            Instance.new("UICorner", Status).CornerRadius = UDim.new(1,0)
            
            local Dot = Instance.new("Frame")
            Dot.Size = UDim2.new(0,16,0,16)
            Dot.Position = default and UDim2.new(1,-18,0.5,-8) or UDim2.new(0,2,0.5,-8)
            Dot.BackgroundColor3 = Color3.new(1,1,1)
            Dot.Parent = Status
            Instance.new("UICorner", Dot).CornerRadius = UDim.new(1,0)
            
            local on = default
            TFrame.MouseButton1Click:Connect(function()
                on = not on
                TweenService:Create(Status, TweenInfo.new(0.2), {BackgroundColor3 = on and Config.Color or Color3.fromRGB(50,50,50)}):Play()
                TweenService:Create(Dot, TweenInfo.new(0.2), {Position = on and UDim2.new(1,-18,0.5,-8) or UDim2.new(0,2,0.5,-8)}):Play()
                callback(on)
            end)
        end,
        Slider = function(text, min, max, default, callback)
            local SFrame = Instance.new("Frame")
            SFrame.Size = UDim2.new(1, 0, 0, 50)
            SFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
            SFrame.Parent = Page
            Instance.new("UICorner", SFrame).CornerRadius = UDim.new(0, 8)
            
            local Lbl = Instance.new("TextLabel")
            Lbl.Text = text
            Lbl.Size = UDim2.new(1, -20, 0, 20)
            Lbl.Position = UDim2.new(0, 15, 0, 5)
            Lbl.BackgroundTransparency = 1
            Lbl.TextColor3 = Color3.new(1,1,1)
            Lbl.Font = Enum.Font.GothamSemibold
            Lbl.TextXAlignment = Enum.TextXAlignment.Left
            Lbl.TextSize = 14
            Lbl.Parent = SFrame
            
            local Val = Instance.new("TextLabel")
            Val.Text = tostring(default)
            Val.Size = UDim2.new(0, 50, 0, 20)
            Val.Position = UDim2.new(1, -65, 0, 5)
            Val.BackgroundTransparency = 1
            Val.TextColor3 = Config.Color
            Val.Font = Config.Font
            Val.Parent = SFrame
            
            local Bar = Instance.new("TextButton")
            Bar.Text = ""
            Bar.Size = UDim2.new(1, -30, 0, 6)
            Bar.Position = UDim2.new(0, 15, 0, 35)
            Bar.BackgroundColor3 = Color3.fromRGB(50,50,50)
            Bar.Parent = SFrame
            Instance.new("UICorner", Bar).CornerRadius = UDim.new(1,0)
            
            local Fill = Instance.new("Frame")
            Fill.Size = UDim2.new((default-min)/(max-min), 0, 1, 0)
            Fill.BackgroundColor3 = Config.Color
            Fill.Parent = Bar
            Instance.new("UICorner", Fill).CornerRadius = UDim.new(1,0)
            
            local drag = false
            Bar.MouseButton1Down:Connect(function() drag = true end)
            UserInputService.InputEnded:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 then drag = false end end)
            UserInputService.InputChanged:Connect(function(i)
                if drag and i.UserInputType == Enum.UserInputType.MouseMovement then
                    local p = math.clamp((UserInputService:GetMouseLocation().X - Bar.AbsolutePosition.X) / Bar.AbsoluteSize.X, 0, 1)
                    Fill.Size = UDim2.new(p, 0, 1, 0)
                    local v = math.floor(min + ((max-min)*p))
                    Val.Text = tostring(v)
                    callback(v)
                end
            end)
        end,
        Button = function(text, callback)
            local Btn = Instance.new("TextButton")
            Btn.Text = text
            Btn.Size = UDim2.new(1, 0, 0, 40)
            Btn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
            Btn.TextColor3 = Color3.new(1,1,1)
            Btn.Font = Enum.Font.GothamSemibold
            Btn.TextSize = 14
            Btn.Parent = Page
            Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 8)
            Btn.MouseButton1Click:Connect(function()
                TweenService:Create(Btn, TweenInfo.new(0.1), {BackgroundColor3 = Config.Color}):Play()
                task.wait(0.1)
                TweenService:Create(Btn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(25, 25, 25)}):Play()
                callback()
            end)
        end
    }
end

-- === 4. FEATURES ===

-- Tabs
local SecurityTab = Library:Tab("Security")
local MainTab = Library:Tab("Main")
local CombatTab = Library:Tab("Combat")
local VisualsTab = Library:Tab("Visuals")
local MiscTab = Library:Tab("Misc")

-- SECURITY FEATURES (ANTI-BAN)
SecurityTab.Button("Activate Anti-Kick (Protection)", function()
    local success, err = pcall(function()
        local mt = getrawmetatable(game)
        local old = mt.__namecall
        setreadonly(mt, false)
        mt.__namecall = newcclosure(function(self, ...)
            local method = getnamecallmethod()
            if method == "Kick" or method == "kick" then
                Library:Notify("Security", "Kick Attempt Blocked!")
                return nil
            end
            return old(self, ...)
        end)
        setreadonly(mt, true)
    end)
    if success then
        Library:Notify("Success", "Anti-Kick Active")
    else
        Library:Notify("Info", "Standard Anti-Kick Active (Executor limited)")
    end
end)

SecurityTab.Button("Anti-Ban (Error Bypass)", function()
    local ScriptContext = game:GetService("ScriptContext")
    ScriptContext.Error:Connect(function(msg, stack, script)
        -- Hataları yutar ve servera göndermez
    end)
    Library:Notify("Security", "Error Logging Disabled (Silent Mode)")
end)

SecurityTab.Toggle("Anti-AFK (Never get kicked)", true, function(state)
    if state then
        VirtualUser:CaptureController()
        VirtualUser:ClickButton2(Vector2.new())
        Library:Notify("Security", "Anti-AFK is Running")
    end
end)

-- MAIN FEATURES
MainTab.Toggle("Fly Mode (CFrame)", false, function(state)
    State.Fly = state
    local root = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if state and root then
        local bv = Instance.new("BodyVelocity", root)
        bv.Name = "SkyFly"
        bv.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
        bv.Velocity = Vector3.new(0,0,0)
        
        task.spawn(function()
            while State.Fly and LocalPlayer.Character do
                local cam = Camera.CFrame
                local v = Vector3.new()
                if UserInputService:IsKeyDown(Enum.KeyCode.W) then v = v + cam.LookVector end
                if UserInputService:IsKeyDown(Enum.KeyCode.S) then v = v - cam.LookVector end
                if UserInputService:IsKeyDown(Enum.KeyCode.A) then v = v - cam.RightVector end
                if UserInputService:IsKeyDown(Enum.KeyCode.D) then v = v + cam.RightVector end
                if UserInputService:IsKeyDown(Enum.KeyCode.Space) then v = v + Vector3.new(0,1,0) end
                if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then v = v - Vector3.new(0,1,0) end
                bv.Velocity = v * 50
                RunService.RenderStepped:Wait()
            end
            if root:FindFirstChild("SkyFly") then root.SkyFly:Destroy() end
        end)
    else
        if root and root:FindFirstChild("SkyFly") then root.SkyFly:Destroy() end
    end
end)

MainTab.Slider("Walk Speed", 16, 300, 16, function(v)
    if LocalPlayer.Character then LocalPlayer.Character.Humanoid.WalkSpeed = v end
end)
MainTab.Slider("Jump Power", 50, 300, 50, function(v)
    if LocalPlayer.Character then LocalPlayer.Character.Humanoid.JumpPower = v end
end)

-- COMBAT FEATURES
CombatTab.Toggle("Silent Aimbot", false, function(state) State.Aimbot = state end)

RunService.RenderStepped:Connect(function()
    if State.Aimbot and UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton2) then
        local target = nil
        local dist = math.huge
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("Head") then
                local sPos, vis = Camera:WorldToViewportPoint(p.Character.Head.Position)
                if vis then
                    local mag = (Vector2.new(UserInputService:GetMouseLocation().X, UserInputService:GetMouseLocation().Y) - Vector2.new(sPos.X, sPos.Y)).Magnitude
                    if mag < 150 and mag < dist then
                        dist = mag
                        target = p.Character.Head
                    end
                end
            end
        end
        if target then
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, target.Position)
        end
    end
end)

-- VISUALS FEATURES
VisualsTab.Toggle("ESP (Players)", false, function(state)
    State.ESP = state
    if state then
        task.spawn(function()
            while State.ESP do
                for _, p in pairs(Players:GetPlayers()) do
                    if p ~= LocalPlayer and p.Character then
                        if not p.Character:FindFirstChild("SkyESP") then
                            local h = Instance.new("Highlight", p.Character)
                            h.Name = "SkyESP"
                            h.FillColor = Config.Color
                            h.OutlineColor = Color3.new(1,1,1)
                            h.FillTransparency = 0.5
                        end
                    end
                end
                task.wait(1)
            end
        end)
    else
        for _,v in pairs(Workspace:GetDescendants()) do if v.Name == "SkyESP" then v:Destroy() end end
    end
end)

VisualsTab.Button("FPS Booster", function()
    for _,v in pairs(Workspace:GetDescendants()) do
        if v:IsA("BasePart") then v.Material = Enum.Material.SmoothPlastic end
        if v:IsA("Texture") then v:Destroy() end
    end
    Library:Notify("System", "FPS Boosted!")
end)

-- MISC
MiscTab.Button("Rejoin Server", function()
    TeleportService:Teleport(game.PlaceId, LocalPlayer)
end)

-- INITIALIZE
Blur.Size = 20
Library:Notify("System", "SkyForgezX Hub v7.0 Loaded!")
