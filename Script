--[[
    SkyForgezX Hub v20.0 - GHOST Edition
    Language: English
    Style: Transparent/Glass UI
    Status: Universal & Stable (Xeno/Delta/Solara)
]]

-- === SAFE LOAD ===
if not game:IsLoaded() then game.Loaded:Wait() end

-- === SERVICES ===
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Camera = Workspace.CurrentCamera

-- === UI SETUP ===
local function GetGuiParent()
    return LocalPlayer:WaitForChild("PlayerGui")
end

-- Cleanup
for _, v in pairs(GetGuiParent():GetChildren()) do
    if v.Name == "SkyGhostHub" then v:Destroy() end
end

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "SkyGhostHub"
ScreenGui.Parent = GetGuiParent()
ScreenGui.ResetOnSpawn = false
ScreenGui.IgnoreGuiInset = true

-- === THEME (TRANSPARENT) ===
local Theme = {
    MainColor = Color3.fromRGB(170, 0, 255), -- Purple Neon
    Background = Color3.fromRGB(0, 0, 0),    -- Black
    Transparency = 0.4,                      -- Glass Effect (0.4 = Semi Transparent)
    Text = Color3.fromRGB(255, 255, 255)
}

-- === MAIN FRAME ===
local Main = Instance.new("Frame")
Main.Name = "MainFrame"
Main.Size = UDim2.new(0, 600, 0, 350)
Main.Position = UDim2.new(0.5, -300, 0.5, -175)
Main.BackgroundColor3 = Theme.Background
Main.BackgroundTransparency = Theme.Transparency -- TRANSPARENT HERE
Main.BorderSizePixel = 0
Main.Visible = true
Main.Parent = ScreenGui

-- Rounded Corners
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = Main

-- Border Stroke
local UIStroke = Instance.new("UIStroke")
UIStroke.Color = Theme.MainColor
UIStroke.Thickness = 2
UIStroke.Parent = Main

-- TITLE
local Title = Instance.new("TextLabel")
Title.Text = "SkyForgezX Hub - GHOST"
Title.Size = UDim2.new(1, -40, 0, 40)
Title.Position = UDim2.new(0, 20, 0, 0)
Title.BackgroundTransparency = 1
Title.TextColor3 = Theme.MainColor
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = Main

-- CLOSE BUTTON
local CloseBtn = Instance.new("TextButton")
CloseBtn.Text = "X"
CloseBtn.Size = UDim2.new(0, 30, 0, 30)
CloseBtn.Position = UDim2.new(1, -35, 0, 5)
CloseBtn.BackgroundTransparency = 1
CloseBtn.TextColor3 = Color3.fromRGB(255, 50, 50)
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextSize = 18
CloseBtn.Parent = Main
CloseBtn.MouseButton1Click:Connect(function()
    Main.Visible = false
end)

-- CONTAINER
local Container = Instance.new("ScrollingFrame")
Container.Size = UDim2.new(1, -20, 1, -50)
Container.Position = UDim2.new(0, 10, 0, 45)
Container.BackgroundTransparency = 1
Container.ScrollBarThickness = 2
Container.Parent = Main
local UIList = Instance.new("UIListLayout")
UIList.Padding = UDim.new(0, 8)
UIList.HorizontalAlignment = Enum.HorizontalAlignment.Center
UIList.Parent = Container

-- === DRAGGABLE FUNCTION ===
local dragging, dragInput, dragStart, startPos
local function update(input)
    local delta = input.Position - dragStart
    Main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end
Main.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true; dragStart = input.Position; startPos = Main.Position
        input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragging = false end end)
    end
end)
Main.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then dragInput = input end
end)
UserInputService.InputChanged:Connect(function(input) if input == dragInput and dragging then update(input) end end)

-- === MOBILE OPEN BUTTON ===
local MobBtn = Instance.new("TextButton")
MobBtn.Text = "MENU"
MobBtn.Size = UDim2.new(0, 60, 0, 60)
MobBtn.Position = UDim2.new(0, 30, 0.5, -30)
MobBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MobBtn.BackgroundTransparency = 0.5 -- Transparent Button
MobBtn.TextColor3 = Theme.MainColor
MobBtn.Font = Enum.Font.GothamBold
MobBtn.TextSize = 12
MobBtn.Parent = ScreenGui
Instance.new("UICorner", MobBtn).CornerRadius = UDim.new(0, 12)
Instance.new("UIStroke", MobBtn).Color = Theme.MainColor
Instance.new("UIStroke", MobBtn).Thickness = 2

MobBtn.MouseButton1Click:Connect(function()
    Main.Visible = not Main.Visible
end)

-- === COMPONENT FACTORY ===
local function CreateButton(text, callback)
    local Btn = Instance.new("TextButton")
    Btn.Text = text
    Btn.Size = UDim2.new(0.95, 0, 0, 40)
    Btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Btn.BackgroundTransparency = 0.6 -- Semi-Transparent Buttons
    Btn.TextColor3 = Theme.Text
    Btn.Font = Enum.Font.GothamSemibold
    Btn.TextSize = 14
    Btn.Parent = Container
    
    local Corner = Instance.new("UICorner")
    Corner.CornerRadius = UDim.new(0, 6)
    Corner.Parent = Btn
    
    local Stroke = Instance.new("UIStroke")
    Stroke.Color = Theme.MainColor
    Stroke.Transparency = 0.7
    Stroke.Parent = Btn
    
    Btn.MouseButton1Click:Connect(function()
        -- Click Animation
        Stroke.Transparency = 0
        Btn.TextColor3 = Theme.MainColor
        task.wait(0.1)
        Stroke.Transparency = 0.7
        Btn.TextColor3 = Theme.Text
        if callback then callback() end
    end)
end

local function CreateToggle(text, callback)
    local Btn = Instance.new("TextButton")
    Btn.Text = text .. " [OFF]"
    Btn.Size = UDim2.new(0.95, 0, 0, 40)
    Btn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Btn.BackgroundTransparency = 0.6
    Btn.TextColor3 = Theme.Text
    Btn.Font = Enum.Font.GothamSemibold
    Btn.TextSize = 14
    Btn.Parent = Container
    
    local Corner = Instance.new("UICorner")
    Corner.CornerRadius = UDim.new(0, 6)
    Corner.Parent = Btn
    
    local on = false
    Btn.MouseButton1Click:Connect(function()
        on = not on
        if on then
            Btn.Text = text .. " [ON]"
            Btn.TextColor3 = Theme.MainColor
            Btn.BackgroundTransparency = 0.4
        else
            Btn.Text = text .. " [OFF]"
            Btn.TextColor3 = Theme.Text
            Btn.BackgroundTransparency = 0.6
        end
        if callback then callback(on) end
    end)
end

-- === FEATURES ===

-- 1. CFRAME FLY (STABLE)
local flying = false
local flySpeed = 50
CreateToggle("Fly Mode (CFrame)", function(state)
    flying = state
    if flying then
        local root = LocalPlayer.Character:WaitForChild("HumanoidRootPart")
        local hum = LocalPlayer.Character:WaitForChild("Humanoid")
        
        task.spawn(function()
            while flying and LocalPlayer.Character do
                hum.PlatformStand = true
                local cf = Camera.CFrame
                local v = Vector3.new()
                
                if UserInputService:IsKeyDown(Enum.KeyCode.W) then v = v + cf.LookVector end
                if UserInputService:IsKeyDown(Enum.KeyCode.S) then v = v - cf.LookVector end
                if UserInputService:IsKeyDown(Enum.KeyCode.A) then v = v - cf.RightVector end
                if UserInputService:IsKeyDown(Enum.KeyCode.D) then v = v + cf.RightVector end
                
                root.Velocity = Vector3.new(0,0,0)
                root.CFrame = CFrame.new(root.Position + (v * (flySpeed/10)), root.Position + cf.LookVector)
                RunService.Heartbeat:Wait()
            end
            hum.PlatformStand = false
        end)
    else
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.PlatformStand = false
        end
    end
end)

-- 2. SPEED
CreateButton("Set Speed (100)", function()
    if LocalPlayer.Character then
        LocalPlayer.Character.Humanoid.WalkSpeed = 100
    end
end)

CreateButton("Reset Speed", function()
    if LocalPlayer.Character then
        LocalPlayer.Character.Humanoid.WalkSpeed = 16
    end
end)

-- 3. JUMP
CreateButton("High Jump (100)", function()
    if LocalPlayer.Character then
        LocalPlayer.Character.Humanoid.UseJumpPower = true
        LocalPlayer.Character.Humanoid.JumpPower = 100
    end
end)

-- 4. NOCLIP
local noclip = false
CreateToggle("Noclip (Walk Through Walls)", function(state)
    noclip = state
    if noclip then
        RunService:BindToRenderStep("GhostNoclip", 100, function()
            if LocalPlayer.Character then
                for _,v in pairs(LocalPlayer.Character:GetChildren()) do
                    if v:IsA("BasePart") then v.CanCollide = false end
                end
            end
        end)
    else
        RunService:UnbindFromRenderStep("GhostNoclip")
    end
end)

-- 5. ESP
local esp = false
CreateToggle("ESP (See Players)", function(state)
    esp = state
    if esp then
        task.spawn(function()
            while esp do
                for _, v in pairs(Players:GetPlayers()) do
                    if v ~= LocalPlayer and v.Character and not v.Character:FindFirstChild("GhostESP") then
                        local h = Instance.new("Highlight")
                        h.Name = "GhostESP"
                        h.FillColor = Theme.MainColor
                        h.OutlineColor = Color3.new(1,1,1)
                        h.Parent = v.Character
                    end
                end
                task.wait(1)
            end
        end)
    else
        for _, v in pairs(Workspace:GetDescendants()) do
            if v.Name == "GhostESP" then v:Destroy() end
        end
    end
end)

-- 6. FULLBRIGHT
CreateToggle("Fullbright (Night Vision)", function(state)
    if state then
        Lighting.Brightness = 2
        Lighting.ClockTime = 14
        Lighting.GlobalShadows = false
    else
        Lighting.Brightness = 1
        Lighting.GlobalShadows = true
    end
end)

-- 7. HITBOX
CreateButton("Expand Hitbox (Big Head)", function()
    for _, p in pairs(Players:GetPlayers()) do
        if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("Head") then
            p.Character.Head.Size = Vector3.new(10, 10, 10)
            p.Character.Head.Transparency = 0.5
            p.Character.Head.CanCollide = false
        end
    end
end)

-- 8. ANTI-LAG
CreateButton("Delete Textures (FPS Boost)", function()
    for _, v in pairs(Workspace:GetDescendants()) do
        if v:IsA("Texture") or v:IsA("Decal") then v:Destroy() end
    end
end)

-- 9. RESET
CreateButton("Reset Character", function()
    LocalPlayer.Character:BreakJoints()
end)
